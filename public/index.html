<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description"
        content="AthenaX ‚Äì Fast, secure, serverless peer-to-peer file transfer powered by WebRTC." />
    <title>AthenaX ‚Äì P2P File Transfer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;700&display=swap"
        rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />
</head>

<body>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê HEADER ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <header class="app-header">
        <div class="logo-area">
            <div class="logo-icon" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none">
                    <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" fill="url(#lg)" />
                    <defs>
                        <linearGradient id="lg" x1="3" y1="2" x2="21" y2="22" gradientUnits="userSpaceOnUse">
                            <stop offset="0%" stop-color="#a78bfa" />
                            <stop offset="100%" stop-color="#38bdf8" />
                        </linearGradient>
                    </defs>
                </svg>
            </div>
            <div class="logo-text">
                <span class="logo-name">AthenaX</span>
                <span class="logo-tagline">Peer-to-Peer File Transfer</span>
            </div>
        </div>
        <div class="self-identity" id="self-identity">
            <span class="identity-label">Your Device:</span>
            <span class="identity-name" id="self-name">Connecting‚Ä¶</span>
        </div>
    </header>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODE SELECTION SCREEN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="mode-screen" id="mode-screen">
        <div class="mode-screen-inner">
            <h1 class="mode-headline">What do you want to do?</h1>
            <p class="mode-subtext">Choose your role for this session. Both devices must be on AthenaX.</p>
            <div class="mode-cards">

                <!-- SEND card -->
                <button class="mode-card" id="mode-send" aria-label="Send files">
                    <div class="mode-card-icon">
                        <svg viewBox="0 0 24 24" fill="none">
                            <path d="M22 2L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                            <path d="M22 2L15 22l-4-9-9-4 20-7z" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>
                    <span class="mode-card-title">Send</span>
                    <span class="mode-card-desc">Pick a nearby receiver and send a file directly.</span>
                    <div class="mode-card-glow mode-card-glow--send"></div>
                </button>

                <!-- RECEIVE card -->
                <button class="mode-card" id="mode-receive" aria-label="Receive files">
                    <div class="mode-card-icon">
                        <svg viewBox="0 0 24 24" fill="none">
                            <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" />
                            <polyline points="7 10 12 15 17 10" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" />
                            <line x1="12" y1="15" x2="12" y2="3" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" />
                        </svg>
                    </div>
                    <span class="mode-card-title">Receive</span>
                    <span class="mode-card-desc">Make your device visible and wait for an incoming file.</span>
                    <div class="mode-card-glow mode-card-glow--receive"></div>
                </button>

            </div>
        </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MAIN APP (shown after mode selected) ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <main class="app-main" id="app-main" hidden>

        <!-- ‚îÄ‚îÄ‚îÄ‚îÄ SENDER VIEW ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <div id="sender-view" hidden>
            <div class="app-grid">

                <!-- Left: Peer list -->
                <section class="panel panel-peers" aria-label="Nearby receivers">
                    <div class="panel-header">
                        <h2 class="panel-title"><span class="panel-icon">üì°</span>Nearby Receivers</h2>
                        <span class="peer-count-badge" id="peer-count">0</span>
                    </div>
                    <p class="hint-text" id="peer-hint">No receivers nearby. Ask the other device to open AthenaX and
                        tap <strong>Receive</strong>.</p>
                    <ul class="peer-list" id="peer-list" aria-live="polite"></ul>
                    <div class="server-status">
                        <span class="status-dot" id="status-dot"></span>
                        <span class="status-text" id="status-text">Connecting‚Ä¶</span>
                    </div>
                </section>

                <!-- Right: File send -->
                <section class="panel panel-transfer" aria-label="Send a file">
                    <div class="panel-header">
                        <h2 class="panel-title"><span class="panel-icon">üìÅ</span>Send a File</h2>
                        <button class="btn-ghost" id="btn-change-mode-send" title="Change mode">‚áÑ Change</button>
                    </div>

                    <div class="selected-peer-display">
                        <span class="selected-peer-label">Sending to:</span>
                        <span class="selected-peer-name" id="selected-peer-name">None ‚Äî pick a receiver</span>
                    </div>

                    <!-- Drop zone -->
                    <div class="drop-zone" id="drop-zone" tabindex="0" role="button" aria-label="Select or drop a file">
                        <div class="drop-zone-inner">
                            <div class="drop-icon">
                                <svg viewBox="0 0 24 24" fill="none">
                                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4" stroke="currentColor"
                                        stroke-width="2" stroke-linecap="round" />
                                    <polyline points="17 8 12 3 7 8" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                    <line x1="12" y1="3" x2="12" y2="15" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" />
                                </svg>
                            </div>
                            <p class="drop-primary">Drag &amp; drop a file here</p>
                            <p class="drop-secondary">or click to browse ‚Äî any size supported</p>
                            <p class="drop-file-name" id="drop-file-name"></p>
                        </div>
                        <input type="file" id="file-input" class="file-input-hidden" aria-hidden="true" tabindex="-1" />
                    </div>

                    <button class="btn btn-send" id="btn-send" disabled>
                        <span>‚ö°</span> Send File
                    </button>

                    <!-- Progress -->
                    <div class="progress-section" id="progress-section" hidden>
                        <div class="progress-header">
                            <span class="progress-label" id="progress-label">Preparing‚Ä¶</span>
                            <span class="progress-percent" id="progress-percent">0%</span>
                        </div>
                        <div class="progress-track" id="progress-track" role="progressbar" aria-valuemin="0"
                            aria-valuemax="100" aria-valuenow="0">
                            <div class="progress-bar" id="progress-bar"></div>
                        </div>
                        <div class="progress-meta">
                            <span id="progress-bytes">0 B / 0 B</span>
                            <span id="progress-speed">-- B/s</span>
                        </div>
                    </div>

                    <!-- Log -->
                    <div class="status-log" id="status-log">
                        <p class="log-entry log-info">üîí All transfers are end-to-end encrypted via WebRTC.</p>
                    </div>
                </section>

            </div>
        </div><!-- /sender-view -->

        <!-- ‚îÄ‚îÄ‚îÄ‚îÄ RECEIVER VIEW ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <div id="receiver-view" hidden>

            <!-- Waiting card -->
            <div class="receiver-waiting-card">
                <div class="receiver-pulse-ring"></div>
                <div class="receiver-inner">
                    <div class="receiver-icon">üì•</div>
                    <h2 class="receiver-title">Waiting for sender‚Ä¶</h2>
                    <p class="receiver-desc">Your device is now visible to nearby senders as:</p>
                    <div class="receiver-name-badge" id="receiver-name-badge">‚Äî</div>
                    <p class="receiver-hint">Ask the sender to open AthenaX, tap <strong>Send</strong>, and select your
                        device.</p>
                    <button class="btn-ghost" id="btn-change-mode-recv" style="margin-top:1.25rem">‚áÑ Change
                        Mode</button>
                </div>
            </div>

            <!-- Receive progress -->
            <div class="recv-progress-card" id="recv-progress-card" hidden>
                <div class="progress-header">
                    <span class="progress-label" id="recv-label">Incoming‚Ä¶</span>
                    <span class="progress-percent" id="recv-percent">0%</span>
                </div>
                <div class="progress-track" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"
                    id="recv-track">
                    <div class="progress-bar" id="recv-bar"></div>
                </div>
                <div class="progress-meta">
                    <span id="recv-bytes">0 B / 0 B</span>
                    <span id="recv-speed">-- B/s</span>
                </div>
            </div>

            <!-- Received files gallery -->
            <div class="files-gallery-section" id="files-gallery-section">
                <div class="gallery-header">
                    <h3 class="gallery-title">üìÇ Received Files</h3>
                    <span class="gallery-count" id="gallery-count">0 files</span>
                </div>
                <div class="gallery-empty" id="gallery-empty">Files you receive will appear here.</div>
                <div class="gallery-grid" id="gallery-grid"></div>
            </div>

        </div><!-- /receiver-view -->

    </main>

    <!-- Hidden download anchor -->
    <a id="download-anchor" style="display:none" aria-hidden="true"></a>

    <!-- Lightbox for full-size preview -->
    <div class="lightbox" id="lightbox" hidden>
        <button class="lightbox-close" id="lightbox-close" aria-label="Close preview">‚úï</button>
        <div class="lightbox-body" id="lightbox-body"></div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="app.js"></script>
</body>

</html>